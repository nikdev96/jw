# ÐŸÑ€Ð¾Ð¼Ð¿Ñ‚ Ð´Ð»Ñ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ JUSTWEED Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ

ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Claude Code, Ð¿Ð¾Ð¼Ð¾Ð³Ð¸ Ð¼Ð½Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Telegram Mini App **JUSTWEED** Ð½Ð° ÑÑ‚Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ.

## ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

**Ð¡Ñ‚ÐµÐº:**
- Backend: FastAPI + PostgreSQL + SQLAlchemy 2.0 async
- Frontend: React 18 + TypeScript + Vite + Tailwind CSS
- Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹: `git@github.com:nikdev96/jw.git` (Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹, Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ð¿Ð¾ SSH)

**Ð§Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ:**
1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
2. ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹
3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ PostgreSQL
4. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Backend (FastAPI Ñ uvicorn)
5. Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Frontend (production build)
6. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Nginx ÐºÐ°Ðº reverse proxy + static files
7. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ SSL (Let's Encrypt) Ð´Ð»Ñ Ð´Ð¾Ð¼ÐµÐ½Ð°
8. ÐŸÑ€Ð¸Ð²ÑÐ·Ð°Ñ‚ÑŒ Ð´Ð¾Ð¼ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð¼Ñ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
9. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ systemd ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐºÐ°
10. ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð‘Ð” Ð¸ seed Ð´Ð°Ð½Ð½Ñ‹Ðµ

---

## Ð”Ð¾Ð¼ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð¼Ñ

**Ð”Ð¾Ð¼ÐµÐ½:** [Ð¢Ð£Ð¢_Ð’Ð’Ð•Ð”Ð˜_Ð¡Ð’ÐžÐ™_Ð”ÐžÐœÐ•Ð] (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: `justweed.example.com`)

**DNS Ð·Ð°Ð¿Ð¸ÑÐ¸ ÑƒÐ¶Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹:**
- A-Ð·Ð°Ð¿Ð¸ÑÑŒ ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð° IP ÑÑ‚Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°
- (Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒ: `dig +short justweed.example.com` Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ IP ÑÐµÑ€Ð²ÐµÑ€Ð°)

---

## Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

**ÐžÐ¡:** Ubuntu 22.04 / Debian 11+ (Ð¸Ð»Ð¸ Ñ‡Ñ‚Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾)

**ÐŸÐ¾Ñ€Ñ‚Ñ‹:**
- 80 (HTTP) - Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚
- 443 (HTTPS) - Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚
- 22 (SSH) - Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚

---

## Ð¨Ð°Ð³ 1: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹

Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð¿Ð°ÐºÐµÑ‚Ñ‹:

```bash
# ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ
sudo apt update && sudo apt upgrade -y

# Python 3.11+
sudo apt install python3.11 python3.11-venv python3-pip -y

# PostgreSQL 15+
sudo apt install postgresql postgresql-contrib -y

# Node.js 20+ Ð¸ npm
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install nodejs -y

# Nginx
sudo apt install nginx -y

# Git
sudo apt install git -y

# Certbot Ð´Ð»Ñ SSL
sudo apt install certbot python3-certbot-nginx -y

# Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ñ‹
sudo apt install curl wget build-essential -y
```

**ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð²ÐµÑ€ÑÐ¸Ð¸:**
```bash
python3.11 --version  # >= 3.11
node --version        # >= 20.x
npm --version         # >= 10.x
psql --version        # >= 15.x
nginx -v              # >= 1.18
```

---

## Ð¨Ð°Ð³ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° PostgreSQL

**2.1. Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¸ Ð‘Ð”:**

```bash
sudo -u postgres psql
```

Ð’ psql Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸:
```sql
CREATE USER justweed_user WITH PASSWORD 'Ð¡Ð˜Ð›Ð¬ÐÐ«Ð™_ÐŸÐÐ ÐžÐ›Ð¬_Ð¡Ð“Ð•ÐÐ•Ð Ð˜Ð Ð£Ð™';
CREATE DATABASE justweed_db OWNER justweed_user;
GRANT ALL PRIVILEGES ON DATABASE justweed_db TO justweed_user;
\q
```

**2.2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ:**
```bash
psql -U justweed_user -d justweed_db -h localhost
# Ð’Ð²ÐµÐ´Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ, Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ
\q
```

---

## Ð¨Ð°Ð³ 3: ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ

**3.1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSH ÐºÐ»ÑŽÑ‡Ð° Ð´Ð»Ñ GitHub:**

Ð•ÑÐ»Ð¸ SSH ÐºÐ»ÑŽÑ‡ Ð´Ð»Ñ GitHub ÐµÑ‰Ðµ Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½:
```bash
# Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐ¹ SSH ÐºÐ»ÑŽÑ‡ (ÐµÑÐ»Ð¸ Ð½ÐµÑ‚)
ssh-keygen -t ed25519 -C "server@justweed" -f ~/.ssh/id_ed25519 -N ""

# Ð’Ñ‹Ð²ÐµÐ´Ð¸ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡
cat ~/.ssh/id_ed25519.pub
```

â†’ **Ð”Ð¾Ð±Ð°Ð²ÑŒ ÑÑ‚Ð¾Ñ‚ ÐºÐ»ÑŽÑ‡ Ð² GitHub:**
- Ð—Ð°Ð¹Ð´Ð¸ Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ `nikdev96/jw`
- Settings â†’ Deploy keys â†’ Add deploy key
- Ð’ÑÑ‚Ð°Ð²ÑŒ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡, Ð´Ð°Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ð½Ð° Ñ‡Ñ‚ÐµÐ½Ð¸Ðµ

**3.2. ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹:**

```bash
cd /var/www
sudo mkdir -p justweed
sudo chown $USER:$USER justweed
cd justweed

# ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹
git clone git@github.com:nikdev96/jw.git .
```

---

## Ð¨Ð°Ð³ 4: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Backend

**4.1. Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ:**

```bash
cd /var/www/justweed
python3.11 -m venv venv
source venv/bin/activate
```

**4.2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸:**

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

**4.3. Ð¡Ð¾Ð·Ð´Ð°Ð¹ `.env` Ñ„Ð°Ð¹Ð»:**

```bash
cat > .env << 'EOF'
# Database
DATABASE_URL=postgresql+asyncpg://justweed_user:Ð¢Ð’ÐžÐ™_ÐŸÐÐ ÐžÐ›Ð¬@localhost:5432/justweed_db

# Telegram Bot
TELEGRAM_BOT_TOKEN=Ð¢Ð’ÐžÐ™_Ð¢ÐžÐšÐ•Ð_Ð‘ÐžÐ¢Ð_ÐžÐ¢_BOTFATHER
TELEGRAM_BOT_USERNAME=Ð¢Ð’ÐžÐ™_Ð‘ÐžÐ¢_USERNAME

# App
SECRET_KEY=Ð¡Ð“Ð•ÐÐ•Ð Ð˜Ð Ð£Ð™_Ð¡Ð›Ð£Ð§ÐÐ™ÐÐ«Ð™_ÐšÐ›Ð®Ð§_64_Ð¡Ð˜ÐœÐ’ÐžÐ›Ð
ENVIRONMENT=production
DEBUG=False

# CORS (Ð´Ð¾Ð¼ÐµÐ½ Ð±ÐµÐ· https://)
ALLOWED_ORIGINS=https://justweed.example.com

# API
API_V1_PREFIX=/api/v1
EOF
```

**Ð—Ð°Ð¼ÐµÐ½Ð¸:**
- `Ð¢Ð’ÐžÐ™_ÐŸÐÐ ÐžÐ›Ð¬` â†’ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð¾Ñ‚ PostgreSQL
- `Ð¢Ð’ÐžÐ™_Ð¢ÐžÐšÐ•Ð_Ð‘ÐžÐ¢Ð_ÐžÐ¢_BOTFATHER` â†’ Ñ‚Ð¾ÐºÐµÐ½ Ð±Ð¾Ñ‚Ð°
- `Ð¢Ð’ÐžÐ™_Ð‘ÐžÐ¢_USERNAME` â†’ username Ð±Ð¾Ñ‚Ð° (Ð±ÐµÐ· @)
- `Ð¡Ð“Ð•ÐÐ•Ð Ð˜Ð Ð£Ð™_Ð¡Ð›Ð£Ð§ÐÐ™ÐÐ«Ð™_ÐšÐ›Ð®Ð§_64_Ð¡Ð˜ÐœÐ’ÐžÐ›Ð` â†’ openssl rand -hex 32
- `justweed.example.com` â†’ Ñ‚Ð²Ð¾Ð¹ Ð´Ð¾Ð¼ÐµÐ½

**4.4. ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸:**

```bash
source venv/bin/activate
alembic upgrade head
```

**4.5. Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸ seed Ð´Ð°Ð½Ð½Ñ‹Ðµ (ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ + Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹):**

```bash
psql -U justweed_user -d justweed_db -h localhost < seed_justweed_SAFE.sql
psql -U justweed_user -d justweed_db -h localhost < seed_ux_test_products.sql
```

**4.6. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð·Ð°Ð¿ÑƒÑÐº:**

```bash
source venv/bin/activate
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

â†’ ÐžÑ‚ÐºÑ€Ð¾Ð¹ `http://IP_Ð¡Ð•Ð Ð’Ð•Ð Ð:8000/docs` Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
â†’ Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒÑÑ Swagger UI
â†’ Ctrl+C Ð´Ð»Ñ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸

---

## Ð¨Ð°Ð³ 5: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Frontend

**5.1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸:**

```bash
cd /var/www/justweed/frontend
npm install
```

**5.2. Ð¡Ð¾Ð·Ð´Ð°Ð¹ `.env` Ð´Ð»Ñ production:**

```bash
cat > .env << 'EOF'
VITE_API_URL=https://justweed.example.com/api/v1
EOF
```

**Ð—Ð°Ð¼ÐµÐ½Ð¸** `justweed.example.com` Ð½Ð° Ñ‚Ð²Ð¾Ð¹ Ð´Ð¾Ð¼ÐµÐ½.

**5.3. Ð¡Ð¾Ð±ÐµÑ€Ð¸ production build:**

```bash
npm run build
```

â†’ Ð”Ð¾Ð»Ð¶Ð½Ð° Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑŒÑÑ Ð¿Ð°Ð¿ÐºÐ° `dist/` Ñ compiled Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸

---

## Ð¨Ð°Ð³ 6: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Nginx

**6.1. Ð¡Ð¾Ð·Ð´Ð°Ð¹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ:**

```bash
sudo nano /etc/nginx/sites-available/justweed
```

Ð’ÑÑ‚Ð°Ð²ÑŒ:

```nginx
# Redirect HTTP to HTTPS
server {
    listen 80;
    listen [::]:80;
    server_name justweed.example.com;

    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    location / {
        return 301 https://$server_name$request_uri;
    }
}

# HTTPS
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name justweed.example.com;

    # SSL certificates (Ð±ÑƒÐ´ÑƒÑ‚ ÑÐ¾Ð·Ð´Ð°Ð½Ñ‹ certbot'Ð¾Ð¼)
    ssl_certificate /etc/letsencrypt/live/justweed.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/justweed.example.com/privkey.pem;

    # SSL Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # Frontend static files
    root /var/www/justweed/frontend/dist;
    index index.html;

    # Gzip
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

    # Frontend (SPA)
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Backend API
    location /api {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # Backend docs (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ð´Ð»Ñ /docs)
    location /docs {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /openapi.json {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
    }
}
```

**Ð—Ð°Ð¼ÐµÐ½Ð¸** `justweed.example.com` Ð½Ð° Ñ‚Ð²Ð¾Ð¹ Ð´Ð¾Ð¼ÐµÐ½ (4 Ð¼ÐµÑÑ‚Ð°).

**6.2. Ð’ÐºÐ»ÑŽÑ‡Ð¸ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ:**

```bash
sudo ln -s /etc/nginx/sites-available/justweed /etc/nginx/sites-enabled/
sudo nginx -t  # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
```

**ÐÐ• Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°Ð¹ nginx Ð¿Ð¾ÐºÐ°!** Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð¼ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚.

---

## Ð¨Ð°Ð³ 7: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°

**7.1. Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð´Ð»Ñ certbot:**

```bash
sudo mkdir -p /var/www/certbot
```

**7.2. Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸ nginx Ð±ÐµÐ· SSL:**

ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹ `/etc/nginx/sites-available/justweed`:
- Ð—Ð°ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€ÑƒÐ¹ Ð²ÐµÑÑŒ `server` Ð±Ð»Ð¾Ðº Ð´Ð»Ñ 443 Ð¿Ð¾Ñ€Ñ‚Ð°
- ÐžÑÑ‚Ð°Ð²ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð±Ð»Ð¾Ðº Ð´Ð»Ñ 80 Ð¿Ð¾Ñ€Ñ‚Ð°

```bash
sudo nano /etc/nginx/sites-available/justweed
```

Ð˜Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ„Ð¸Ð³:

```bash
sudo bash -c 'cat > /etc/nginx/sites-available/justweed-temp << EOF
server {
    listen 80;
    server_name justweed.example.com;

    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    location / {
        root /var/www/justweed/frontend/dist;
        try_files \$uri \$uri/ /index.html;
    }
}
EOF'

sudo rm /etc/nginx/sites-enabled/justweed
sudo ln -s /etc/nginx/sites-available/justweed-temp /etc/nginx/sites-enabled/justweed
sudo nginx -t && sudo systemctl reload nginx
```

**7.3. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚:**

```bash
sudo certbot certonly --webroot -w /var/www/certbot -d justweed.example.com
```

â†’ Ð¡Ð»ÐµÐ´ÑƒÐ¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼
â†’ Ð’Ð²ÐµÐ´Ð¸ email Ð´Ð»Ñ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹
â†’ Ð¡Ð¾Ð³Ð»Ð°ÑÐ¸ÑÑŒ Ñ Terms of Service

**7.4. Ð’ÐµÑ€Ð½Ð¸ Ð¿Ð¾Ð»Ð½ÑƒÑŽ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ nginx:**

```bash
sudo rm /etc/nginx/sites-enabled/justweed
sudo ln -s /etc/nginx/sites-available/justweed /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx
```

**7.5. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ Ð°Ð²Ñ‚Ð¾Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ SSL:**

```bash
sudo systemctl enable certbot.timer
sudo systemctl start certbot.timer
```

---

## Ð¨Ð°Ð³ 8: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ systemd ÑÐµÑ€Ð²Ð¸ÑÐ° Ð´Ð»Ñ Backend

**8.1. Ð¡Ð¾Ð·Ð´Ð°Ð¹ ÑÐµÑ€Ð²Ð¸Ñ Ñ„Ð°Ð¹Ð»:**

```bash
sudo nano /etc/systemd/system/justweed-backend.service
```

Ð’ÑÑ‚Ð°Ð²ÑŒ:

```ini
[Unit]
Description=JUSTWEED Backend (FastAPI)
After=network.target postgresql.service

[Service]
Type=simple
User=www-data
Group=www-data
WorkingDirectory=/var/www/justweed
Environment="PATH=/var/www/justweed/venv/bin"
ExecStart=/var/www/justweed/venv/bin/uvicorn app.main:app --host 127.0.0.1 --port 8000 --workers 4
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

**8.2. Ð”Ð°Ð¹ Ð¿Ñ€Ð°Ð²Ð°:**

```bash
sudo chown -R www-data:www-data /var/www/justweed
sudo chmod -R 755 /var/www/justweed
```

**8.3. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸ ÑÐµÑ€Ð²Ð¸Ñ:**

```bash
sudo systemctl daemon-reload
sudo systemctl enable justweed-backend
sudo systemctl start justweed-backend
sudo systemctl status justweed-backend
```

â†’ Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ `active (running)`

---

## Ð¨Ð°Ð³ 9: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°

**9.1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Backend:**
```bash
curl http://localhost:8000/api/v1/categories
```
â†’ Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ JSON Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼Ð¸

**9.2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Frontend:**
```bash
curl -I https://justweed.example.com
```
â†’ Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ 200 OK

**9.3. ÐžÑ‚ÐºÑ€Ð¾Ð¹ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ:**
```
https://justweed.example.com
```
â†’ Ð”Ð¾Ð»Ð¶Ð½Ð° Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒÑÑ Ð³Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° JUSTWEED

---

## Ð¨Ð°Ð³ 10: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Telegram Mini App

**10.1. ÐžÑ‚ÐºÑ€Ð¾Ð¹ BotFather Ð² Telegram:**
```
/mybots
â†’ Ð’Ñ‹Ð±ÐµÑ€Ð¸ ÑÐ²Ð¾ÐµÐ³Ð¾ Ð±Ð¾Ñ‚Ð°
â†’ Bot Settings
â†’ Menu Button
â†’ Configure Menu Button
â†’ URL: https://justweed.example.com
```

**10.2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ:**
- ÐžÑ‚ÐºÑ€Ð¾Ð¹ Ð±Ð¾Ñ‚Ð° Ð² Telegram
- ÐÐ°Ð¶Ð¼Ð¸ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð¼ÐµÐ½ÑŽ (Ð²Ð½Ð¸Ð·Ñƒ)
- Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒÑÑ Mini App

---

## Ð›Ð¾Ð³Ð¸ Ð¸ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

**Backend Ð»Ð¾Ð³Ð¸:**
```bash
sudo journalctl -u justweed-backend -f
```

**Nginx Ð»Ð¾Ð³Ð¸:**
```bash
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

**PostgreSQL Ð»Ð¾Ð³Ð¸:**
```bash
sudo tail -f /var/log/postgresql/postgresql-15-main.log
```

---

## ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð´Ð°

ÐšÐ¾Ð³Ð´Ð° Ð½ÑƒÐ¶Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð´ Ð¸Ð· GitHub:

```bash
cd /var/www/justweed
git pull origin main

# Backend
source venv/bin/activate
pip install -r requirements.txt
alembic upgrade head
sudo systemctl restart justweed-backend

# Frontend
cd frontend
npm install
npm run build

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸ nginx
sudo systemctl reload nginx
```

---

## Troubleshooting

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Backend Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ**
```bash
sudo journalctl -u justweed-backend -n 100
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð»Ð¾Ð³Ð¸ Ð½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ¸
```

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: 502 Bad Gateway**
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ñ‡Ñ‚Ð¾ backend Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½: `sudo systemctl status justweed-backend`
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ñ€Ñ‚ 8000 ÑÐ»ÑƒÑˆÐ°ÐµÑ‚ÑÑ: `sudo netstat -tlnp | grep 8000`

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Frontend Ð½Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ**
```bash
# ÐŸÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸ frontend
cd /var/www/justweed/frontend
npm run build
sudo systemctl reload nginx
```

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: SSL Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚**
```bash
sudo certbot renew --dry-run
sudo systemctl status certbot.timer
```

---

## Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚

- [ ] PostgreSQL Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½
- [ ] Backend Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ (`systemctl status justweed-backend`)
- [ ] Frontend ÑÐ¾Ð±Ñ€Ð°Ð½ (`frontend/dist/` ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚)
- [ ] Nginx Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½ Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- [ ] Ð”Ð¾Ð¼ÐµÐ½ Ñ€ÐµÐ·Ð¾Ð»Ð²Ð¸Ñ‚ÑÑ Ð² IP ÑÐµÑ€Ð²ÐµÑ€Ð°
- [ ] Telegram Bot Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼ URL
- [ ] API Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ (curl test)
- [ ] Frontend Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
- [ ] Mini App Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð² Telegram

---

**Ð£Ð´Ð°Ñ‡Ð¸ Ñ Ð´ÐµÐ¿Ð»Ð¾ÐµÐ¼! ðŸš€**
